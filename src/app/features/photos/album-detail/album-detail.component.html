<div class="container mx-auto px-4 py-4">
  <div class="back-link">
    <a routerLink="/albums" hlmBtn variant="outline" class="back-button">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      <span>Back to Albums</span>
    </a>
  </div>

  @if (album()) {
    <div class="album-header">
      <h1>{{ album()!.title }}</h1>
      <p class="photo-count">{{ photos().length }} photos</p>
    </div>

    <!-- Desktop: Pagination -->
    <div class="desktop-view">
      <div class="photos-grid">
        @for (photo of paginatedPhotos(); track trackByPhotoId($index, photo)) {
          <div class="photo-card" tabindex="0"
            [attr.aria-label]="'Photo: ' + photo.title">
            <!-- Loading state with camera icon -->
            <div class="photo-loading">
              <div class="loading-icon">üì∑</div>
              <div class="loading-text">Loading...</div>
            </div>
            <!-- Actual image -->
            <img 
              [src]="photo.thumbnailUrl" 
              [alt]="photo.title" 
              loading="lazy"
              (load)="onImageLoad($event)"
              (error)="onImageError($event)"
            />
            <!-- Title shown on hover (only when loaded) -->
            <div class="photo-title">{{ photo.title }}</div>
          </div>
        }
      </div>

      @if (totalPages() > 1) {
        <app-pagination [currentPage]="currentPage()" [totalPages]="totalPages()"
          (pageChange)="goToPage($event)"></app-pagination>
      }
    </div>

    <!-- Mobile: Load More -->
    <div class="mobile-view">
      <div class="photos-grid">
        @for (photo of loadedPhotos(); track trackByPhotoId($index, photo)) {
          <div class="photo-card" tabindex="0"
            [attr.aria-label]="'Photo: ' + photo.title">
            <!-- Loading state with camera icon -->
            <div class="photo-loading">
              <div class="loading-icon">üì∑</div>
              <div class="loading-text">Loading...</div>
            </div>
            <!-- Actual image -->
            <img 
              [src]="photo.thumbnailUrl" 
              [alt]="photo.title" 
              loading="lazy"
              (load)="onImageLoad($event)"
              (error)="onImageError($event)"
            />
            <!-- Title shown on hover (only when loaded) -->
            <div class="photo-title">{{ photo.title }}</div>
          </div>
        }
      </div>

      @if (hasMore()) {
        <div class="text-center mt-6">
          <button (click)="loadMore()" hlmBtn size="lg" class="load-more-btn">
            Load More Photos
          </button>
        </div>
      }
    </div>
  } @else {
    <div class="loading-container">
      <div class="album-header">
        <div class="skeleton" style="height: 2.5rem; width: 60%; margin: 0 auto 0.5rem;"></div>
        <div class="skeleton" style="height: 1.125rem; width: 30%; margin: 0 auto;"></div>
      </div>
      <div class="skeleton-grid">
        @for (item of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]; track item) {
          <div class="skeleton skeleton-photo"></div>
        }
      </div>
    </div>
  }
</div>

<!-- Modal/Lightbox - Commented out
@if (selectedPhoto()) {
  <div class="modal-overlay" (click)="closePhoto()" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="modal-close" (click)="closePhoto()" aria-label="Close photo">√ó</button>
      <div class="modal-image-wrapper" [class.loaded]="!modalImageLoading() && !modalImageError()"
        [class.error]="modalImageError()">
        @if (!modalImageError()) {
          <img 
            [src]="selectedPhoto()!.url"
            [alt]="selectedPhoto()!.title" 
            class="modal-image"
            [class.placeholder]="modalImageLoading()"
            (load)="onModalImageLoad($event)"
            (error)="onModalImageError($event)"
          />
        }
        @if (modalImageError()) {
          <div class="modal-image-error">
            <div class="error-icon">üñºÔ∏è</div>
            <p>Image not available</p>
          </div>
        }
      </div>
      <p class="modal-title" id="modal-title">{{ selectedPhoto()!.title }}</p>
    </div>
  </div>
}
-->
